@model  GuestViewModel
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Http

@inject SignInManager<ApplicationUser> signInManager
@inject UserManager<ApplicationUser> userManager
@{
    ViewData["index"] = 0;

    ViewData["Title"] = "Dashboard";

    string userEmail = User.Identity.Name ?? "user@user.com";
    var user = await userManager.FindByEmailAsync(userEmail) ?? new ApplicationUser();
}


<div class="container">
    <div class="row">

        @if (signInManager.IsSignedIn(User))
        {
            <div class="col">
                <p class="text-white mt-5 mb-5">Welcome back, <b>@User.Identity.Name</b></p>
            </div>
        }
        else
        {
            <div class="col">
                <p class="text-white mt-5 mb-5">Welcome back</p>
            </div>
        }

    </div>
    <!-- row -->
    <div class="row tm-content-row">
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
            <div class="tm-bg-primary-dark tm-block">
                <h2 class="tm-block-title">Total Guest On Board</h2>
                <h1 class="tm-block-title">@Model.totalInHouseGuest</h1>
                @*<canvas id="lineChart"></canvas>*@
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
            <div class="tm-bg-primary-dark tm-block">
                <h2 class="tm-block-title">Total Guest Visited</h2>
                <h1 class="tm-block-title">@Model.totalGuest</h1>

                @*<canvas id="barChart"></canvas>*@
            </div>
        </div>
      
        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-overflow">
                <h2 class="tm-block-title">In House Guest List</h2>
                <div class="tm-notification-items">
                    @foreach (var guest in Model.Guests)
                    {
                        <div class="media tm-notification-item">
                            <div class="tm-gray-circle"><img src="~/@guest.Image" alt="Avatar Image" class="rounded-circle" height="80" width="80"></div>
                            <div class="media-body">
                                <p class="mb-2">
                                    <b>@guest.Name</b> and <b>6 others</b> sent you new <a href="#"
                                                                                       class="tm-notification-link">product updates</a>. Check new orders.
                                </p>
                                <span class="tm-small tm-text-color-secondary">Arrival Time: @guest.ArrivalTime.ToString()</span>
                            </div>
                        </div>
                    }



                    @*<div class="media tm-notification-item">
                        <div class="tm-gray-circle"><img src="img/notification-02.jpg" alt="Avatar Image" class="rounded-circle"></div>
                        <div class="media-body">
                            <p class="mb-2">
                                <b>Oliver Too</b> and <b>6 others</b> sent you existing <a href="#"
                                                                                           class="tm-notification-link">product updates</a>. Read more reports.
                            </p>
                            <span class="tm-small tm-text-color-secondary">6h ago.</span>
                        </div>
                    </div>*@

                </div>
            </div>
        </div>

      
    </div>
</div>